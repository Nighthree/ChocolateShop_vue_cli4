(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40a7d11a"],{b1dd:function(t,s,a){t.exports=a.p+"img/chocolate_icon.3d2a2e41.png"},bd36:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),a("div",{staticClass:"minHeight"},[a("section",{staticClass:"container mt-5"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-8 col-md-10 col-12"},[a("ul",{staticClass:"form-row ulStyle justify-content-md-around"},[t._m(0),a("li",{staticClass:"col-md-4 col-12 mb-3"},[a("span",{staticClass:"checkStep d-block text-center",class:{active:!1===t.order.is_paid}},[t._v("2.金流付款")])]),a("li",{staticClass:"col-md-4 col-12 mb-3"},[a("span",{staticClass:"checkStep d-block text-center",class:{active:!0===t.order.is_paid}},[t._v("3.完成！")])])])])])]),a("section",{staticClass:"container"},[t._m(1),a("div",{staticClass:"container mb-5"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-8 col-md-10 col-12"},[a("table",{staticClass:"table mb-0"},[t._m(2),a("tbody",t._l(t.order.products,(function(s){return a("tr",{key:s.id},[a("td",{staticClass:"text-center align-middle d-none d-sm-table-cell"},[a("img",{staticStyle:{height:"50px"},attrs:{src:s.product.imageUrl,alt:""}})]),a("td",{staticClass:"align-middle"},[t._v(t._s(s.product.title))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(s.qty)+" "+t._s(s.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(s.final_total)))])])})),0)]),a("p",{staticClass:"text-right h5 mb-5"},[t._v(" 總計： "),a("span",{staticClass:"text-danger h4"},[t._v(t._s(t._f("currency")(t.order.total)))]),t._v(" 元 ")])]),a("div",{staticClass:"col-lg-8 col-md-10 col-12"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",[t._v("Email")]),a("td",[t._v(t._s(t.order.user.email))])]),a("tr",[a("th",[t._v("姓名")]),a("td",[t._v(t._s(t.order.user.name))])]),a("tr",[a("th",[t._v("收件人電話")]),a("td",[t._v(t._s(t.order.user.tel))])]),a("tr",[a("th",[t._v("收件人地址")]),a("td",[t._v(t._s(t.order.user.address))])]),a("tr",[a("th",[t._v("付款狀態")]),a("td",[t.order.is_paid?a("span",{staticClass:"text-success"},[t._v("付款完成")]):a("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])])]),t.order.is_paid?a("router-link",{staticClass:"toProducts font-weight-bold text-center mb-3 d-block",attrs:{to:"/products"},nativeOn:{click:function(s){return s.preventDefault(),t.getSearchText("All")}}},[a("i",{staticClass:"fas fa-arrow-left"}),t._v(" 繼續選購商品 ")]):a("div",{staticClass:"text-right"},[a("a",{staticClass:"btn btn-pay",on:{click:function(s){return s.preventDefault(),t.payOrder()}}},[t._v("確認付款去")])])],1)])])])]),a("div",{staticClass:"modal fade",attrs:{id:"paySuccess",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),t._m(4),a("div",{staticClass:"modal-footer justify-content-center"},[a("button",{staticClass:"btn btn-secondary py-2 px-3",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btnChoco py-2 px-3",attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.goToProducts(s)}}},[t._v("前往")])])])])])],1)},c=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",{staticClass:"col-md-4 col-12 mb-3"},[a("span",{staticClass:"checkStep d-block text-center"},[t._v("1.填寫訂購資料")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("h3",{staticClass:"text-center text-Choco mb-3"},[e("img",{staticStyle:{height:"30px"},attrs:{src:a("b1dd")}}),t._v("確認訂購資料 ")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",[a("th",{staticClass:"align-middle d-none d-sm-table-cell"}),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",{staticClass:"text-right"},[t._v("單價")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-header alert-success"},[a("h5",{staticClass:"modal-title font-weight-bold h6",attrs:{id:"paySuccess"}},[t._v("付款成功")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"modal-body h5 text-center"},[a("p",[a("span",{staticClass:"text-success"},[t._v("付款成功")]),a("br"),t._v("是否繼續前往商品頁面選購？ ")])])}],i=(a("99af"),a("1157")),r=a.n(i),o={data:function(){return{orderId:"",order:{user:{}}}},methods:{getCart:function(){this.$store.dispatch("getCart")},getOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/order/").concat(t.orderId);t.$http.get(s).then((function(s){t.order=s.data.order}))},payOrder:function(){var t=this;t.$store.dispatch("pushLoadingStatu",!0);var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/pay/").concat(t.orderId);t.$http.post(s).then((function(s){s.data.success?(t.getOrder(),t.paySuccess()):(alert(s.data.message),t.getOrder()),t.$store.dispatch("pushLoadingStatu",!1)}))},paySuccess:function(){r()("#paySuccess").modal("show")},goToProducts:function(){var t=this;r()("#paySuccess").modal("hide"),t.getSearchText("All"),t.$router.push("/products")},getSearchText:function(t){var s=this;s.$store.dispatch("getSearchText",t)}},computed:{isLoading:function(){return this.$store.state.status.isLoading},cart:function(){return this.$store.state.cart}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()}},n=o,l=a("2877"),d=Object(l["a"])(n,e,c,!1,null,null,null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-40a7d11a.7a486875.js.map