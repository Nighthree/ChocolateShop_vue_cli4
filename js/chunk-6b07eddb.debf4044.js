(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b07eddb"],{1799:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination d-flex justify-content-center"},[e("li",{staticClass:"page-item",class:[{disabled:!t.pagenation.has_pre}]},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.pageComponent(t.pagenation.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagenation.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:[{active:t.pagenation.current_page===a}]},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.pageComponent(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:[{disabled:!t.pagenation.has_next}]},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.pageComponent(t.pagenation.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},s=[],n={name:"pagenation",props:{pagenation:{type:Object}},methods:{pageComponent:function(t){var a=this;a.$emit("changeCurrPage",t)}}},i=n,c=e("2877"),l=Object(c["a"])(i,o,s,!1,null,null,null);a["a"]=l.exports},a1ae:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"text-right my-4"},[e("button",{staticClass:"btn btn-primary",attrs:{title:"如果沒有資料請點選重新讀取"},on:{click:function(a){return a.preventDefault(),t.getCoupon(a)}}},[t._v("取得優惠券資訊")]),e("button",{staticClass:"btn btn-primary ml-3",on:{click:function(a){return a.preventDefault(),t.openCouponModal(!0)}}},[t._v("建立新的優惠券")])]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table"},[t._m(0),e("tbody",t._l(t.coupons,(function(a){return e("tr",{key:a.id},[e("th",{attrs:{width:"120px"}},[t._v(t._s(a.title))]),e("td",{staticClass:"text-right",attrs:{width:"120px"}},[t._v(t._s(a.percent))]),e("td",{staticClass:"text-center",attrs:{width:"100px"}},[a.is_enabled?e("div",[t._v("啟用中")]):e("div",[t._v("未啟用")])]),e("td",{staticClass:"text-center",attrs:{width:"200px"}},[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),t.openCouponModal(!1,a)}}},[e("span",{staticClass:"d-sm-block d-none"},[t._v("編輯")]),e("i",{staticClass:"fas fa-edit d-block d-sm-none"})]),e("button",{staticClass:"btn btn-outline-danger",on:{click:function(e){return e.preventDefault(),t.openDeleteCouponModal(a)}}},[e("span",{staticClass:"d-sm-block d-none"},[t._v("刪除")]),e("i",{staticClass:"fas fa-trash-alt d-block d-sm-none"})])])])])})),0)])]),e("Pagination",{attrs:{pagenation:t.paginations},on:{changeCurrPage:t.getCoupon}}),e("div",{staticClass:"modal fade",attrs:{id:"updataCoupon",tabindex:"-1",role:"dialog","aria-labelledby":"updataCouponTitle","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-scrollable",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"updataCouponTitle"}},[t._v(t._s(t.modalTitle))]),t._m(1)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"couponTitle"}},[t._v("優惠名稱")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.title,expression:"coupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"couponTitle",placeholder:"輸入優惠名稱"},domProps:{value:t.coupon.title},on:{input:function(a){a.target.composing||t.$set(t.coupon,"title",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"couponPercent"}},[t._v("優惠百分比")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.percent,expression:"coupon.percent"}],staticClass:"form-control",attrs:{type:"number",id:"couponPercent",placeholder:"輸入優惠百分比"},domProps:{value:t.coupon.percent},on:{input:function(a){a.target.composing||t.$set(t.coupon,"percent",a.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"couponCode"}},[t._v("優惠代碼")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.code,expression:"coupon.code"}],staticClass:"form-control",attrs:{type:"number",id:"couponCode",placeholder:"輸入優惠代碼"},domProps:{value:t.coupon.code},on:{input:function(a){a.target.composing||t.$set(t.coupon,"code",a.target.value)}}})]),e("div",{staticClass:"form-group form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.is_enabled,expression:"coupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"couponIsEnabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.coupon.is_enabled)?t._i(t.coupon.is_enabled,null)>-1:t._q(t.coupon.is_enabled,1)},on:{change:function(a){var e=t.coupon.is_enabled,o=a.target,s=o.checked?1:0;if(Array.isArray(e)){var n=null,i=t._i(e,n);o.checked?i<0&&t.$set(t.coupon,"is_enabled",e.concat([n])):i>-1&&t.$set(t.coupon,"is_enabled",e.slice(0,i).concat(e.slice(i+1)))}else t.$set(t.coupon,"is_enabled",s)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"couponIsEnabled"}},[t._v("是否啟用")])])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.updataCoupon(a)}}},[t._v("確認")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"deleteCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"deleteCouponModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),e("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.coupon.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delCoupon}},[t._v("確認刪除")])])])])])],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("優惠名稱")]),e("th",[t._v("優惠百分比")]),e("th",{staticClass:"text-center"},[t._v("啟用狀態")]),e("th",{staticClass:"text-center"},[t._v("編輯&刪除")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"deleteCouponModalLabel"}},[e("span",[t._v("刪除產品")])]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],n=(e("99af"),e("1157")),i=e.n(n),c=e("1799"),l={data:function(){return{isNew:!1,paginations:{},coupons:[],coupon:{},modalTitle:""}},components:{Pagination:c["a"]},computed:{isLoading:function(){return this.$store.state.status.isLoading}},methods:{openCouponModal:function(t,a){var e=this;t?(e.isNew=!0,e.modalTitle="新增優惠券",e.coupon={}):(e.isNew=!1,e.modalTitle="編輯優惠券",e.coupon=Object.assign({},a)),i()("#updataCoupon").modal("show")},openDeleteCouponModal:function(t){i()("#deleteCouponModal").modal("show");var a=this;a.coupon=t},updataCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/admin/coupon"),e="post";t.isNew||(a="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/admin/coupon/").concat(t.coupon.id),e="put"),t.$http[e](a,{data:t.coupon}).then((function(a){a.data.success?(t.$store.dispatch("updateMessage",{message:t.modalTitle+"成功",status:"success"}),t.getCoupon(),i()("#updataCoupon").modal("hide")):(t.$store.dispatch("updateMessage",{message:a.data.message,status:"danger"}),t.getCoupon(),i()("#updataCoupon").modal("hide"))}))},delCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/admin/coupon/").concat(t.coupon.id);t.$http.delete(a).then((function(a){a.data.success?t.$store.dispatch("updateMessage",{message:"刪除優惠券成功",status:"success"}):t.$store.dispatch("updateMessage",{message:a.data.message,status:"danger"}),i()("#deleteCouponModal").modal("hide"),t.getCoupon()}))},getCoupon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("text22333","/admin/coupons?page=").concat(t);a.$store.dispatch("pushLoadingStatu",!0),a.$http.get(e).then((function(t){a.coupons=t.data.coupons,a.$store.dispatch("pushLoadingStatu",!1)}))}},created:function(){var t=this;t.getCoupon()}},r=l,u=e("2877"),d=Object(u["a"])(r,o,s,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=chunk-6b07eddb.debf4044.js.map